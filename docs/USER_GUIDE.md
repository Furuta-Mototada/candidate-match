# ユーザーガイド / User Guide

Candidate Match は、あなたの政治的価値観に最も近い国会議員を見つけるためのプラットフォームです。

This guide explains how to use the Candidate Match platform from a user's perspective.

---

## 目次 / Table of Contents

1. [ホームページ / Home Page](#1-ホームページ--home-page)
2. [議員マッチング / Member Matching](#2-議員マッチング--member-matching)
3. [議案別スコア分析 / Legislation Scores](#3-議案別スコア分析--legislation-scores)
4. [法案クラスタリング / Bill Clustering](#4-法案クラスタリング--bill-clustering)
5. [議員ベクトル分析 / Member Vectors](#5-議員ベクトル分析--member-vectors)
6. [よくある質問 / FAQ](#6-よくある質問--faq)

---

## 1. ホームページ / Home Page

ホームページ (`/`) では、プラットフォームの概要と統計データを確認できます。

**表示される情報:**
- 分析済みの法案数
- 登録されている議員数
- 収集済みの投票記録数

**ナビゲーション:**
- 「マッチングを始める」ボタン → 議員マッチング機能へ
- 各機能カード → 詳細分析機能へ

---

## 2. 議員マッチング / Member Matching

これがメイン機能です。あなたの回答パターンと国会議員の投票パターンをAIが比較し、マッチ度を算出します。

### アクセス方法
- URL: `/match`
- ホームページの「マッチングを始める」ボタン

### 使い方

#### ステップ 1: セッションの選択

マッチングを開始するには、まず分析データセット（保存済みベクトル）を選択します。

1. 画面に表示される「保存済みベクトル」カードから1つを選択
2. 各カードには以下の情報が表示されます：
   - **名前**: データセットの名前（例：「2024年通常国会分析」）
   - **クラスター数**: 政策分野の数
   - **法案数**: 分析対象の法案数
   - **議員数**: 分析対象の議員数
   - **次元数**: 分析の精度（通常3次元）

3. 「このベクトルでマッチング開始」ボタンをクリック

#### ステップ 2: 法案への回答

選択したデータセットの各政策クラスターについて、法案への賛否を回答します。

**回答方法:**

各法案に対して3つの選択肢があります：

| ボタン | 意味 | スコア |
|--------|------|--------|
| 👍 賛成 | この法案に賛成 | +1 |
| 🤷 わからない | 判断できない/興味なし | 0 |
| 👎 反対 | この法案に反対 | -1 |

**表示される情報:**
- 法案タイトル
- 法案の説明（AIによる要約がある場合）
- 可決/否決の結果
- 現在のマッチ状況（上位議員）
- 信頼度メーター（回答数に応じて上昇）

**ヒント:**
- AIが「最も情報量の多い」法案を優先的に表示します
- 最低5〜10問回答すると、ある程度信頼できる結果が得られます
- わからない法案は「わからない」を選んで次へ進んでOK

#### ステップ 3: クラスター評価

1つのクラスター（政策分野）の回答が完了すると、そのクラスターのマッチ結果が表示されます。

**評価内容:**
- 上位マッチ議員のリスト
- 類似度スコア（-100% 〜 +100%）
- 議員の所属政党

**重要度の設定:**

各クラスターに対して★1〜5の重要度を設定できます：

| 星 | 意味 |
|----|------|
| ★★★★★ | 非常に重要（この分野を最重視） |
| ★★★★☆ | かなり重要 |
| ★★★☆☆ | 普通の重要度（デフォルト） |
| ★★☆☆☆ | あまり重要でない |
| ★☆☆☆☆ | 重要でない（ほぼ無視） |

「次のクラスターへ」をクリックして次の政策分野に進みます。

#### ステップ 4: 総合結果

全クラスターの回答が完了すると、総合結果が表示されます。

**表示される内容:**

1. **総合ランキング**
   - 全クラスターの重要度を加味した総合マッチ度
   - 上位20名の議員リスト
   - 各議員の政党と総合スコア

2. **分野別スコア**
   - 各クラスターでのマッチ状況
   - クラスターごとの類似度

3. **議員詳細**
   - 議員名をクリックすると詳細ポップアップ
   - 各分野でのスコア内訳

### セッションの保存と再開

**保存:**
- 「セッションを保存」ボタンで現在の進捗を保存
- セッション名を入力して保存

**再開:**
- `/match/saved` ページから保存済みセッションを選択
- 前回の回答から続行可能

---

## 3. 議案別スコア分析 / Legislation Scores

個々の法案に対する議員のスコアを詳細に分析する機能です。

### アクセス方法
- URL: `/legislation-scores`
- ホームページの「議案別スコア分析」カード

### 使い方

#### 法案一覧

ページを開くと、全法案がカード形式で表示されます。

**各カードの情報:**
- 法案番号（例：第215回 閣法 第1号）
- 法案タイトル
- 賛成スコアを持つ議員数
- 反対スコアを持つ議員数
- 平均スコア

**検索・ソート:**
- 検索ボックスで法案タイトルを検索
- ソートオプション：
  - 法案ID順
  - 賛成者数順
  - 反対者数順
  - 平均スコア順

#### 法案詳細

法案カードをクリックすると詳細画面が表示されます。

**表示内容:**

1. **スコア分布グラフ**
   - 横棒グラフで全議員のスコアを可視化
   - 緑色 = 賛成傾向
   - 赤色 = 反対傾向
   - グレー = 中立

2. **議員テーブル**
   - 全議員のスコア一覧
   - 議員名、政党、スコア
   - スコア順にソート済み

3. **統計情報**
   - 賛成者数
   - 反対者数
   - 平均スコア

### スコアの計算方法

議員のスコアは以下の要素から計算されます：

| 行動 | スコア |
|------|--------|
| 法案提出者 | +10 |
| 法案賛成者（連名） | +5 |
| 所属会派メンバー | +2 |
| 押しボタン投票で賛成 | +5 |
| 押しボタン投票で反対 | -5 |
| 起立投票で賛成（会派） | +2 |
| 起立投票で反対（会派） | -2 |

---

## 4. 法案クラスタリング / Bill Clustering

機械学習を使って類似する法案をグループ化し、政策分野を自動分類する機能です。

### アクセス方法
- URL: `/bill-clustering`
- ホームページの「法案クラスタリング」カード

### 使い方

#### クラスタリング結果の表示

1. **クラスタリング選択**
   - ドロップダウンから分析結果を選択
   - 複数の分析結果が保存されている場合、比較可能

2. **クラスター一覧**
   - 各クラスター（政策分野）がカードで表示
   - クラスター名（AI生成）
   - 含まれる法案数

3. **クラスター詳細**
   - クラスターをクリックして詳細表示
   - 所属する法案一覧
   - 代表的な法案

### クラスターの例

機械学習によって自動生成されるクラスターの例：

- 経済・財政政策
- 社会保障・福祉
- 環境・エネルギー
- 外交・安全保障
- 教育・科学技術
- 地方行政
- 司法・法務

---

## 5. 議員ベクトル分析 / Member Vectors

議員の投票パターンを多次元ベクトルとして可視化し、類似性を分析する機能です。

### アクセス方法
- URL: `/member-vectors`
- ホームページの「議員ベクトル分析」カード

### 使い方

#### 分析の設定

1. **クラスタリング結果の選択**
   - ベースとなる法案クラスタリングを選択

2. **クラスターの選択**
   - 特定のクラスター（政策分野）を選択
   - または「全クラスター」で全体分析

3. **次元数の設定**
   - 1〜5次元を選択
   - 次元が多いほど詳細だが、解釈が難しくなる
   - 推奨: 2〜3次元

4. **計算実行**
   - 「潜在ベクトルを計算」ボタンをクリック

#### 結果の表示

**2D散布図:**
- 各議員を点としてプロット
- 近い点 = 投票パターンが類似
- 色分け = 政党

**次元の解釈:**
- 各次元を定義する代表的な法案が表示
- 例: 次元1 = 「環境規制に積極的 ↔ 消極的」

**議員検索:**
- 特定の議員を検索してハイライト
- 類似議員のリストを表示

#### ベクトルの保存

分析結果は「データベースに保存」ボタンで保存できます。
保存したベクトルは議員マッチング機能で使用されます。

---

## 6. よくある質問 / FAQ

### Q: マッチング結果の信頼度はどれくらい？

**A:** 回答数が多いほど信頼度が上がります。
- 5問回答: 参考程度
- 10問回答: ある程度信頼可能
- 20問以上: 高い信頼度

信頼度メーターで現在の信頼度を確認できます。

### Q: 「わからない」を選んでも大丈夫？

**A:** はい、問題ありません。「わからない」（スコア0）は中立として処理され、その法案はマッチング計算に大きく影響しません。無理に賛成/反対を選ぶよりも、正直に「わからない」を選ぶ方が正確な結果が得られます。

### Q: なぜ特定の法案が表示される？

**A:** AI が「最も情報量が多い」法案を優先的に表示します。具体的には：
- 議員間で意見が分かれる法案（議論を呼ぶテーマ）
- まだ不確実性が高い次元を解消できる法案

### Q: データはどこから？

**A:** 全てのデータは以下の公式ソースから取得しています：
- 参議院ウェブサイト (sangiin.go.jp)
- 衆議院ウェブサイト (shugiin.go.jp)
- 首相官邸ウェブサイト (kantei.go.jp)
- 国会会議録検索システム (kokkai.ndl.go.jp)
- 日本法令索引 (hourei.ndl.go.jp)

### Q: セッションはどれくらい保存される？

**A:** 保存したセッションはデータベースに永続的に保存されます。いつでも `/match/saved` から再開できます。

### Q: 結果を他の人と共有できる？

**A:** 現在、直接の共有機能はありませんが、結果画面のスクリーンショットを撮影して共有することは可能です。

### Q: モバイルでも使える？

**A:** はい、レスポンシブデザインに対応しています。ただし、2D可視化などの一部機能はPC画面での利用を推奨します。

---

## お問い合わせ / Contact

技術的な問題やフィードバックは GitHub Issues でお知らせください。

---

*Last updated: December 2025*
